{% import _self as macros %}

<div id="resources-btn">
    <ul class="nav nav-tabs">
        {# Display inherited resources from parents #}
        {% for inherited in currentStep.inheritedResources %}
            {{ macros.displayResourceButton(inherited.resource, inherited.lvl) }}
        {% endfor %}

        {# Display secondary resources of the Step #}
        {% for resource in currentStep.parameters.secondaryResources %}
            {{ macros.displayResourceButton(resource, currentStep.lvl) }}
        {% endfor %}
    </ul>
</div>

{# Macros #}
{% macro displayResourceButton(resource, lvl) %}
    <li rel="tooltip" data-original-title="{{ resource.resourceType.name | trans({}, 'resource') }}">
        <a target="_blank" class="path-tab-btn resource-link lvl-{{ lvl }} resource-tab-btn" href="{{ path('claro_resource_open', {'node': resource.id, 'resourceType': resource.resourceType.name }) }}">
            <span class="resource-name">{{ resource.name }}</span>
        </a>
    </li>
{% endmacro %}