{# Affichage des parents et leurs frères. #}
{% set allParents = currentStep.getParents() %}
{% if allParents is defined and allParents is not empty %}
    {% for parent in allParents %}
        <div class="parent-siblings parent-siblings-{{ parent.lvl }}">
            {% set parentSiblings = parent.getSiblings() %}
            {% set parentIsDisplayed = false %}
            {% for parentSibling in parentSiblings %}
                {% if parentSibling.stepOrder == currentStep.stepOrder + 1 and not parentIsDisplayed %}
                    {% set parentIsDisplayed = true %}
                    <a rel="tooltip" data-original-title="{{ parent.name}}" class="parent step current btn btn-lg btn-default lvl-{{ parent.lvl }}" href="{{ path('innova_path_player_index', { workspaceId: workspace.id, pathId: path.id, stepId : parent.id }) }}"></a>
                {% endif %}
                <a rel="tooltip" data-original-title="{{ parentSibling.name }}" class="parent-sibling step btn btn-lg btn-default lvl-{{ parentSibling.lvl }}" href="{{ path('innova_path_player_index', { workspaceId: workspace.id, pathId: path.id, stepId : parentSibling.id }) }}"></a>
            {% endfor %}
        </div>

        {% if not parentIsDisplayed %}
            <a rel="tooltip" data-original-title="{{ parent.name}}" class="parent step current btn btn-lg btn-default lvl-{{ parent.lvl }}" href="{{ path('innova_path_player_index', { workspaceId: workspace.id, pathId: path.id, stepId : parent.id }) }}"></a>
        {% endif %}

        <div class="separator"></div>
    {% endfor %}
{% endif %}

{# Affichage de l'élément courant et de ses frères. #}
{% set siblings = currentStep.getSiblings() %}
{% set currentStepIsDisplayed = false %}
{% for sibling in siblings %}
    {% if sibling.stepOrder == currentStep.stepOrder + 1 and not currentStepIsDisplayed %}
        {% set currentStepIsDisplayed = true %}
        <a rel="tooltip" data-original-title="{{ currentStep.name }}" class="current step btn btn-lg btn-default lvl-{{ currentStep.lvl }}" href="{{ path('innova_path_player_index', { workspaceId: workspace.id, pathId: path.id, stepId : currentStep.id }) }}"></a>
    {% endif %}
    <a rel="tooltip" data-original-title="{{ sibling.name }}" class="step btn btn-lg btn-default lvl-{{ sibling.lvl }}" href="{{ path('innova_path_player_index', { workspaceId: workspace.id, pathId: path.id, stepId : sibling.id }) }}">
    </a>
{% endfor %}

{% if not currentStepIsDisplayed %}
    <a rel="tooltip" data-original-title="{{ currentStep.name }}" class="current step btn btn-lg btn-default lvl-{{ currentStep.lvl }}" href="{{ path('innova_path_player_index', { workspaceId: workspace.id, pathId: path.id, stepId : currentStep.id }) }}"></a>
{% endif %}



{# Affichage des enfants de l'élément courant #}
{% if currentStep.children is not empty %}
    <div class="separator"></div>
    {% for child in currentStep.children %}
    <a rel="tooltip" data-original-title="{{ child.name }}" class="btn step children btn-lg btn-default" href="{{ path('innova_path_player_index', { workspaceId: workspace.id, pathId: path.id, stepId : child.id }) }}">
    </a>
    {% endfor %}
{% endif %}
